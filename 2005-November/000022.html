<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [TAP-devel] C++ - what am I missing?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/tap-devel/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:tap-devel%40lists.berlios.de?Subject=Re%3A%20%5BTAP-devel%5D%20C%2B%2B%20-%20what%20am%20I%20missing%3F&In-Reply-To=%3C438D7083.2010208%40rattus.homelinux.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000021.html">
   <LINK REL="Next"  HREF="000023.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[TAP-devel] C++ - what am I missing?</H1>
    <B>Robin Glover</B> 
    <A HREF="mailto:tap-devel%40lists.berlios.de?Subject=Re%3A%20%5BTAP-devel%5D%20C%2B%2B%20-%20what%20am%20I%20missing%3F&In-Reply-To=%3C438D7083.2010208%40rattus.homelinux.com%3E"
       TITLE="[TAP-devel] C++ - what am I missing?">robin_tap at rattus.homelinux.com
       </A><BR>
    <I>Wed Nov 30 10:27:31 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000021.html">[TAP-devel] Tools to be used as part of a build
</A></li>
        <LI>Next message: <A HREF="000023.html">[TAP-devel] C++ - what am I missing?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22">[ date ]</a>
              <a href="thread.html#22">[ thread ]</a>
              <a href="subject.html#22">[ subject ]</a>
              <a href="author.html#22">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I saw Peter Urbanec's post here about getting C++ to work in TAPs and
thought I'd give that a go (largely because I'm getting fed up with my
compiler reminding me that it hasn't declared my variable because I
didn't put it at the the beginning of a block).

Changed the makefile for the toolchain to have '-enable-languages=c,c++'
and it all built fine - this allows me to compile and run c++ syntax
code fine in TAPs but any attempt to call any class member variable
results in an immediate reboot. This applies to static member vars,
overloaded operator new (including placement varieties), ctor when
trying to allocate a local object on the stack, etc. I can't define a
global override for operator new, since it clashes with __builtin_new in
libtap.a. The best I could do was define a global placement operator new
(void * operator new (size_t size, other some_other_param)) which did
get called, but the toppy rebooted immediately after - presumably trying
to call the class ctor?

I'm using the c++ compile flags specified in tap.mk - -fno-rtti,
-fno-excpetions, -Wno-pmf-conversions. Is there another incantation I
need to add, or can someone send me some sample code that's known to
work - I'm quite happy to explore from there.

cheers,

Robin



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000021.html">[TAP-devel] Tools to be used as part of a build
</A></li>
	<LI>Next message: <A HREF="000023.html">[TAP-devel] C++ - what am I missing?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22">[ date ]</a>
              <a href="thread.html#22">[ thread ]</a>
              <a href="subject.html#22">[ subject ]</a>
              <a href="author.html#22">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/tap-devel">More information about the TAP-devel
mailing list</a><br>
</body></html>
